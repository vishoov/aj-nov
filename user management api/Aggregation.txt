Aggregation framework is MongoDB's tool to build apis to do reporting, analytics, or complex queries that are hard or impossible with just find 


Results derived from my data

Aggregation pipelines 

find count of users of different age groups 

0-10 -> find AND [>0 and <=10]
10-20   -> find AND >10 <=20
20-30 -> find AND >20 and <=30
30-40
40-50
50-60 

group the users based on age 

-> output 
{
    age-group:0-10 
    count:10
}

Model.aggregate() -> inputs an array -> it contains multiple stages that process the data one by one



Key benefits 

- Efficient Data Processing -> transform and aggregate the data directly within mongoDB 
- Scalable Analytics -> process large datasets with optimized stages and indexes without worrying about implementation efficiency 
- Flexible Transformation - we can combine different stages to reshape data and perform complex queries 

stages

1. $match -> works same as find() used for filtering data based on conditions (recommendation: put it as the first or earliest stage )

2. $group -> groups documents by specified fields and applies Aggregation


3. $project -> this helps us in controlling which fields to include or exclude and create computed fields 

4. $sort -> sorts the data -> 1 = ascending 
and -1 = descending 

pagination
5. $limit -> limit the amount of data that we will be sending in a single query

6. $skip -> will skip the amount of data that we want so that we can send the next series of data 

1-> 1-10
2 -> 11-20
3-> 21-30


7. $lookup -> finding data in other collections ***